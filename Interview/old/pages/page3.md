---
url: /Interview/old/pages/page3.md
---
# 前端首屏优化

PDF查看流程

## 加载优化

* **压缩资源**：使用Gzip或Brotli对JS、CSS和HTML进行压缩。
* **图片懒加载**：延迟加载非首屏图片，可以使用`loading="lazy"`属性或者Intersection Observer API。
* **CDN加速**：将静态资源部署到内容分发网络(CDN)，缩短请求路径。
* **字体优化**：仅加载必要的字体子集，避免阻塞页面渲染。
* **关键资源优先级**：通过`rel="preload"`预加载关键CSS、JS和字体。
* **按需加载(Code Splitting)**：采用动态`import()`拆分非首屏模块。

## 构建优化

* **Tree Shaking**：移除未使用的代码以减小包体积。
* **SplitChunks**：分离第三方库和业务代码，以便更好地利用缓存。
* **服务端渲染(SSR)或预渲染(Prerendering)**：提前生成HTML内容，加快首屏显示速度。
* **HTTP/2/HTTP/3协议**：利用多路复用技术减少请求耗时。

## 服务端配合

* **服务端缓存策略**：合理设置缓存头（如Cache-Control、ETag），减少重复请求。
* **最小化资源数量和大小**：减少不必要的资源请求，并通过合并和压缩CSS、JavaScript文件以及图像压缩来减小传输时间。

## 关键渲染路径(CRP)优化

* **内联关键CSS(Critical CSS)**：提前注入首屏需要的样式，防止无样式内容闪烁(FOUC)。
* **避免阻塞渲染的脚本**：不将JS放在`<head>`中同步加载，而是使用`async`或`defer`。

## 渲染优化

* **最小化CSS和JavaScript**：确保只加载当前页面需要的CSS和JavaScript代码，避免加载不必要的资源。可以通过构建工具（如Webpack、Gulp等）实现代码分割，仅加载必需的部分。

* **异步加载非关键资源**：对于不影响首屏显示的JavaScript和CSS文件，使用异步或延迟加载的方式，以避免阻塞页面的主要内容渲染。

* **内联关键CSS**：将影响首屏样式的关键CSS直接内联到HTML文档中，可以减少外部资源请求，加快首屏渲染速度。

* **服务端渲染（SSR）或静态生成**：通过服务端渲染或者静态站点生成技术（如Next.js、Nuxt.js等），可以在服务器上预先渲染好HTML，然后发送给客户端，这样浏览器可以直接展示内容，无需等待JavaScript执行。

* **图片懒加载**：对不在首屏显示区域内的图片实施懒加载，即当用户滚动页面至这些图片即将进入视口时再进行加载，从而减少初始页面加载时间。

* **使用现代图像格式**：采用更高效的图像格式如WebP代替传统的JPEG和PNG格式，能够有效减小图像大小，加快图像加载速度。

* **DNS预取和预连接**：利用`<link rel="dns-prefetch">`和`<link rel="preconnect">`标签提前解析域名和建立连接，减少资源加载延迟。

* **资源提示（Preload, Prefetch）**：使用`<link rel="preload">`提前加载关键资源，以及`<link rel="prefetch">`为可能需要的资源做准备，提高资源加载优先级。

* **减少重定向**：尽可能减少HTTP重定向的数量，因为每一次重定向都会增加额外的HTTP请求往返时间。

* **优化字体加载**：对于自定义字体，考虑使用`font-display`属性来控制字体加载行为，避免文本不可见的情况；也可以尝试使用系统字体以减少网络请求。

这个分类涵盖了从资源加载、构建过程、服务端支持到浏览器渲染等多个方面的优化措施
